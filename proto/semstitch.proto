syntax = "proto3";
package semstitch;

import "google/protobuf/empty.proto";

enum PixelFmtPB {
  GRAY8  = 0;
  RGB24  = 1;
  RGBA32 = 2;
}

message FrameChunk {
  bytes       data         = 1;
  uint32      width        = 2;
  uint32      height       = 3;
  uint64      timestamp_ns = 4;
  PixelFmtPB  format       = 5;

  // --- добавили:
  uint64      seq          = 6;  // порядковый номер кадра на сервере
  uint32      crc32        = 7;  // CRC32 от data (POLY=0xEDB88320)
}

service SemStitch {
  rpc StreamFrames (stream FrameChunk) returns (stream FrameChunk);
}
